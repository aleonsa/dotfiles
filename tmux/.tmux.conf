# enable mouse usage
set -g mouse on

# --------- PLUGINS -------------
# tmux plugin manager
set -g @plugin 'tmux-plugins/tpm'
# tmux autoreload
set -g @plugin 'b0o/tmux-autoreload'
# tmux-git-autofetch
set -g @plugin 'thepante/tmux-git-autofetch'
# tmux menus
set -g @plugin 'jaclu/tmux-menus'
# tmux continuum
set -g @plugin 'tmux-plugins/tmux-continuum'
# tmux fzf
set -g @plugin 'sainnhe/tmux-fzf'
# extrakto
set -g @plugin 'laktak/extrakto'
# simple-git-status
set -g @plugin 'kristijanhusak/tmux-simple-git-status'
# tmux-battery
set -g @plugin 'tmux-plugins/tmux-battery'
# tmux-mem-cpu-load
set -g @plugin 'thewtex/tmux-mem-cpu-load'
# tmux-cpu
set -g @plugin 'tmux-plugins/tmux-cpu'
# tmux-online-status
set -g @plugin 'tmux-plugins/tmux-online-status'

# GRUVBOX THEME
set -g @plugin 'egel/tmux-gruvbox'

# --------------------------------
# Configure Gruvbox
set -g @tmux-gruvbox 'dark' # or 'light'

# Gruvbox color palette (dark)
thm_bg='#282828'
thm_fg='#ebdbb2'
thm_red='#cc241d'
thm_green='#98971a'
thm_yellow='#d79921'
thm_blue='#458588'
thm_purple='#b16286'
thm_aqua='#689d6a'
thm_orange='#d65d0e'
thm_gray='#a89984'
thm_bright_red='#fb4934'
thm_bright_green='#b8bb26'
thm_bright_yellow='#fabd2f'
thm_bright_blue='#83a598'
thm_bright_purple='#d3869b'
thm_bright_aqua='#8ec07c'
thm_bright_orange='#fe8019'
thm_dark0='#1d2021'
thm_dark1='#3c3836'
thm_dark2='#504945'
thm_dark3='#665c54'
thm_dark4='#7c6f64'
thm_light0='#fbf1c7'
thm_light1='#ebdbb2'
thm_light2='#d5c4a1'
thm_light3='#bdae93'
thm_light4='#a89984'

# Configure Online
set -g @online_icon "ok"
set -g @offline_icon "nok"

# status left look and feel
set -g status-left-length 100
set -g status-left ""
set -ga status-left "#{?client_prefix,#{#[bg=#{@thm_red},fg=#{@thm_bg},bold]  #S },#{#[bg=#{@thm_bg},fg=#{@thm_green}]  #S }}"
set -ga status-left "#[bg=$thm_bg,fg=$thm_gray,none]│"
set -ga status-left "#[bg=$thm_bg,fg=$thm_bright_orange]  #{pane_current_command} "
set -ga status-left "#[bg=$thm_bg,fg=$thm_gray,none]│"
set -ga status-left "#[bg=$thm_bg,fg=$thm_bright_blue]  #{=/-32/...:#{s|$USER|~|:#{b:pane_current_path}}} "
set -ga status-left "#[bg=$thm_bg,fg=$thm_gray,none]#{?window_zoomed_flag,│,}"
set -ga status-left "#[bg=$thm_bg,fg=$thm_bright_yellow]#{?window_zoomed_flag,  zoom ,}"

# status right look and feel
set -g status-right-length 100
set -g status-right ""
set -ga status-right "#{?#{e|>=:10,#{cpu_percentage}},#{#[bg=#{@thm_red},fg=#{@thm_bg}]},#{#[bg=#{@thm_bg},fg=#{@thm_pink}]}} 󰘚 #{cpu_percentage} "
set -ga status-right "#[bg=#{@thm_bg},fg=#{@thm_overlay_0}, none]│"
set -ga status-right "#[bg=#{@thm_bg},fg=#{@thm_green}] 󰍛 #{ram_percentage} "
set -ga status-right "#[bg=#{@thm_bg},fg=#{@thm_overlay_0}, none]│"
set -ga status-right "#[bg=#{@thm_bg},fg=#{@thm_blue}] 󰭦 %m"

# Configure Tmux
set -g status-position bottom
set -g status-style "bg=$thm_bg"
set -g status-justify "absolute-centre"

## bootstrap tpm
if "test ! -d ~/.tmux/plugins/tpm" \
"run 'git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm && ~/.tmux/plugins/tpm/bin/install_plugins'"

# pane border look and feel
setw -g pane-border-status bottom
setw -g pane-border-format ""
setw -g pane-active-border-style "bg=$thm_bg,fg=$thm_bright_orange"
setw -g pane-border-style "bg=$thm_bg,fg=$thm_dark2"
setw -g pane-border-lines single

# window look and feel
set -wg automatic-rename on
set -g automatic-rename-format ""
set -g window-status-format " #I#{?#{!=:#{window_name},Window},: #W,} "
set -g window-status-style "bg=$thm_bg,fg=$thm_light4"
set -g window-status-last-style "bg=$thm_bg,fg=$thm_bright_orange"
set -g window-status-activity-style "bg=$thm_bright_red,fg=$thm_bg"
set -g window-status-bell-style "bg=$thm_bright_red,fg=$thm_bg,bold"
set -gF window-status-separator "#[bg=$thm_bg,fg=$thm_gray]│"
set -g window-status-current-format " #I#{?#{!=:#{window_name},Window},: #W,} "
set -g window-status-current-style "bg=$thm_bright_orange,fg=$thm_bg,bold"

# set variables before loading TPM 
set-environment -g TMUX_PLUGIN_MANAGER_PATH '~/.tmux/plugins/'

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'
